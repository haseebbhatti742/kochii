"use strict";$(window).on("load",function(){getServices()});var $selectServices=$("#service"),serviceNameArray=[],serviceIdArray=[];function addSelectServices(e,t,n){for(var r=0;r<e.length;r++)n.append($("<option></option>").attr("value",t[r]).text(e[r]))}function addSelectStylist(e,n){$.each(e,function(e,t){n.append($("<option></option>").attr("value",t).text(t))})}function getStylists(){fetch("/addAppointment/getStylists",{method:"POST",body:JSON.stringify({name:""}),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(e){if("yes"==e.status){for(var t=[],n=0;n<e.stylists.length;n++)t.push(e.stylists[n].employee_name);addSelectStylist(t,$selectStylists)}})}function getServices(){fetch("/addAppointment/getServices",{method:"POST",body:JSON.stringify({name:""}),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(e){if("yes"==e.status){for(var t=0;t<e.services.length;t++)serviceNameArray.push(e.services[t].service_name),serviceIdArray.push(e.services[t].service_id);addSelectServices(serviceNameArray,serviceIdArray,$selectServices)}})}var serviceArray=[];function selectService(){var e=$("#service").find(":selected").text(),t=$("#service").find(":selected").val();if(0==serviceArray.includes(t)){serviceArray.push(t);var n=document.createElement("div"),r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("value",t),n.setAttribute("class","alert alert-warning alert-dismissible");var s=document.createElement("button");s.setAttribute("class","close"),s.setAttribute("type","button"),s.setAttribute("data-dismiss","alert"),s.onclick=function(){var e=serviceArray.indexOf(t);-1!==e&&serviceArray.splice(e,1)},s.innerHTML="&times;",n.appendChild(s),n.appendChild(r);var i=document.createElement("strong");i.innerHTML=e,n.appendChild(i),document.getElementById("selectedServices").appendChild(n)}}function addAppointment(){var e=document.getElementById("appintment_date").value,t=new Date;t.setHours(0,0,0,0);var n=new Date(e);if(n.setHours(0,0,0,0),n<t||""==e)document.getElementById("msg").innerHTML="Invalid Date",document.getElementById("addError").hidden=!1;else if(0==serviceArray.length)document.getElementById("msg").innerHTML="Select Any Service",document.getElementById("addError").hidden=!1;else{document.getElementById("addError").hidden=!0;var r=JSON.stringify({array:serviceArray});fetch("/addAppointment/add",{method:"POST",body:JSON.stringify({date:n,services:r}),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(e){"yes"==e.status?alert("added successfully"):"error"==e.status&&(document.getElementById("msg").innerHTML=e.msg,document.getElementById("addError").hidden=!1)})}}